<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NLP - Emotion Detection</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        .center-heading {
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="card shadow">
            <div class="card-body">
                <h1 class="center-heading">NLP - Emotion Detection</h1> 

                <div class="form-group mt-4">
                    <label for="textToAnalyze" class="form-label">Please enter the text to be analyzed:</label>
                    <textarea class="form-control" id="textToAnalyze" rows="4" placeholder="Enter your text here..."></textarea>
                </div>

                <div class="form-group">
                    <button onclick="RunSentimentAnalysis()" class="btn btn-secondary">Run Sentiment Analysis</button>
                </div>

                <div class="form-group mt-4">
                    <h5>Result of Emotion Detection:</h5>
                    <pre id="system_response" class="bg-light p-3 border rounded" style="min-height: 100px;"></pre>
                </div>
            </div>
        </div>
    </div>

    <script>
        function RunSentimentAnalysis() {
            const text = document.getElementById("textToAnalyze").value.trim();
            const responseDiv = document.getElementById("system_response");
            responseDiv.textContent = "Analyzing...";

            if (!text) {
                responseDiv.textContent = "Invalid text! Please try again!";
                return;
            }

            fetch(`/emotionDetector/?textToAnalyze=${encodeURIComponent(text)}`)
                .then(res => {
                    if (!res.ok) {
                        return res.text().then(text => { throw new Error(text); });
                    }
                    return res.text();
                })
                .then(data => {
                    responseDiv.textContent = data;
                })
                .catch(err => {
                    responseDiv.textContent = "Error: " + err.message;
                });
        }
    </script>
</body>
</html>
